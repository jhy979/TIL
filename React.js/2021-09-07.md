## React : React Shadow

- ì›¹ ì»´í¬ë„ŒíŠ¸ Shadow DOM
    - ë³¸ë˜ HTMLì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ë³„ë„ì˜ HTML ë©ì–´ë¦¬ì…ë‹ˆë‹¤.
    - HTMLì—ì„œ Shadow DOMì„ ì´ìš©í•˜ì—¬ ì˜¤ì—¼ì„ ë°©ì§€í•©ë‹ˆë‹¤.

```bash
npm install react-shadow
```

```jsx
import root from 'react-shadow'

const styles = `
// ìŠ¤íƒ€ì¼ ì‘ì„±í•©ë‹ˆë‹¤.
`;
function App() {
  return (
   <root.div>
   // ì™¸ë¶€ì™€ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. HTML ì‘ì„±
		<style type="text/css">{styles}</style> // styleì„ ì´ëŸ°ì‹ìœ¼ë¡œ ì‚½ì…í•´ì•¼í•©ë‹ˆë‹¤.
   </root.div>
  );
}

export default App;
```

- `html, style`ì´ `root.div` ì•ˆì—ì„œë§Œ ì ìš©ë©ë‹ˆë‹¤.

---

## React : Ant Design

- ì´ë¯¸ ë””ìì¸ëœ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.
- ì œì‘ìëŠ” cssì™€ componentë¥¼ ëª¨ë‘ ì œê³µí•´ì•¼í•©ë‹ˆë‹¤.

```bash
npm install antd
```

- `index.js`ì— cssíŒŒì¼ ì‚½ì… (ì´ê±´ ì „ì—­ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ë‹ˆë‹¤.)

```jsx
import "antd/dist/antd.css"
```

- ì´í›„ `Ant Design` í™ˆí˜ì´ì§€ì—ì„œ ì»´í¬ë„ŒíŠ¸ ì‚½ì…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ğŸ¤” ì‚¬ì‹¤ íŠ¹ì • cssì™€ íŠ¹ì • ì»´í¬ë„ŒíŠ¸ëŠ” ì—°ê²°ë˜ì–´ ìˆì–´ì„œ `ì‚¬ìš©í•˜ëŠ” cssë§Œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.`

ğŸ‘‰ í•˜ì§€ë§Œ ê·€ì°®ê¸°ì— ì´ê±¸ ìë™ìœ¼ë¡œ í•´ì£¼ëŠ” babel-plugin ì„¤ì •ì´ ìˆìŠµë‹ˆë‹¤. <br>
![image](https://user-images.githubusercontent.com/32920566/132346588-3582c893-8d65-4d1b-9c70-19c80115f2a0.png) <br>

ğŸ¤” `Ant Desgin` ì•„ì´ì½˜ ê°™ì€ ê²½ìš°ëŠ” ìƒˆë¡œìš´ npm ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

```bash
npm install --save @ant-design/icons
```

### ì»´í¬ë„ŒíŠ¸ ì‚½ì… ë¼ì´ë¸ŒëŸ¬ë¦¬

- ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë“  `ì»´í¬ë„ŒíŠ¸ì˜ propsê°€ ë¬´ì—‡ì¸ì§€ë¥¼ íŒŒì•…í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.`
- ê³µì‹ ë¬¸ì„œ APIë¥¼ ë³´ê³  propsë¥¼ í™•ì¸í•˜ì—¬ ë³¸ì¸ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

# React ì‹¤ì „ í™œìš©ë²•

## React : HOC (Higher Order Component) ê³ ì°¨ ì»´í¬ë„ŒíŠ¸

- ë¹„ìŠ·í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” Hookì´ ë‚˜ì™€ì„œ ì¤‘ìš”ë„ê°€ ì‚´ì§ ë–¨ì–´ì§€ê¸´ í–ˆìŒ.
- `ì»´í¬ë„ŒíŠ¸ ì†ì˜ ë¡œì§ì„ ë‹¤ì‹œ í™œìš©í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ `ì…ë‹ˆë‹¤. (ë¦¬ì•¡íŠ¸ì— êµ­í•œëœ ë‚´ìš©ì´ ì•„ë‹™ë‹ˆë‹¤.)

---

- HOCëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

```bash
HOC = function (ì»´í¬ë„ŒíŠ¸){
    return ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸;
}
```

- ì‚¬ìš©ë°©ë²•
1. íš¡ë‹¨ ê´€ì‹¬ì‚¬ - ì•½ê°„ íŠ¸ëœì­ì…˜ ëŠë‚Œ (ë¡œê¹…, ë™ê¸°í™”, ì˜¤ë¥˜ê²€ì¶œ ...)
- ì£¼ì˜ì‚¬í•­
1. render method ì•ˆì— ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.
2. static methodëŠ” ë”°ë¡œ
3. RefsëŠ” í†µê³¼í•˜ì§€ ëª»í•©ë‹ˆë‹¤. (feat. React.forwardRef ì‚¬ìš©)

---

## React : Controlled Component, Uncontrolled Component

- html element ì¤‘ ìƒíƒœë¥¼ ê°€ì§€ê³  ìˆëŠ” ìš”ì†Œ

```bash
input
select
textarea
```

- `Controlled Component`
    - elementë¥¼ ê°€ì§€ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìƒíƒœ ê´€ë¦¬

    ```jsx
    import React from 'react'

    class controlledComponent extends React.Component{
      state = {
        value : "",
      }
      render(){
        const {value} = this.state;
        return (
          <div>
            <input value={value} onChange={this.onChange}/> // ë©”ì†Œë“œ í•¨ìˆ˜ë¥¼ í†µí•´ ê´€ë¦¬ ê°€ëŠ¥ 
            <button onClick={this.click}>ì „ì†¡</button> // ë©”ì†Œë“œ í•¨ìˆ˜ë¥¼ í†µí•´ ê´€ë¦¬ ê°€ëŠ¥
          </div>
        )
      }
      onChange = (e)=>{
        this.setState({
          value : e.target.value
        })
      }
      click = ()=>{
        console.log(this.state.value)
      }
    }

    export default controlledComponent;
    ```

- `UnControlled Component`
    - element ìƒíƒœë¥¼ elementê°€ ê´€ë¦¬, componentëŠ” ì†Œìœ ë§Œ í•˜ëŠ” ê²½ìš°

    ```jsx
    // ìœ„ì˜ ë‚´ìš©ì—ì„œ
    click =()=>{
    	const input = document.querySelector('#app'); //ì‹¤ì œ DOMì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    	console.log(input.value)
    }
    ```

    ğŸ¤” í•˜ì§€ë§Œ ì´ëŠ” ë¦¬ì•¡íŠ¸ì—ì„œ ì§€ì–‘í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

    ğŸ˜€ `Reference` ì‚¬ìš©í•©ì‹œë‹¤.

    ```jsx
    inputRef = React.createRef(); //ì‹¤ì œ DOMì„ ì£¼ì§€ ì•Šê³  ì°¸ì¡°ë¥¼ ê°€ì§€ê³  ì‚¬ìš©í•©ë‹ˆë‹¤.
    ...
    <input ref = {this.inputRef} /> // ìµœì´ˆ ë Œë”ë  ë•ŒëŠ” inputRefê°€ Nullì´ì§€ë§Œ, í•œ ë²ˆ ë Œë”ë§ ë˜ê³  ë‚œ ì´í›„ì—ëŠ” Refê°€ ë“¤ì–´ìˆìŠµë‹ˆë‹¤.

    ...
    console.log(this.inputRef.current.value);
    ```

---

## React : Hook

- class componentì—ì„œë§Œ ì“°ë˜ ê²ƒì„ function componentì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- ì»´í¬ë„ŒíŠ¸ì˜ state logicì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê²Œëœ ì ì—ì„œ í° ì˜ì˜ê°€ ìˆìŠµë‹ˆë‹¤.

### Basic Hooks

- ë‹¤ìŒ ë²„íŠ¼ í´ë¦­í•˜ë©´ count ì˜¤ë¥´ëŠ” ì˜ˆì œë¥¼ function ì»´í¬ë„ŒíŠ¸ë¡œ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.

```jsx
import React from 'react'
export default class Example1 extends React.Component {
  state = {
    count : 0,
  }
  render (){
    const {count} = this.state
    return (
      <div>
        <p>
          You Clicked {count} times.
        </p>
        <button onClick={this.click}>Click me</button>
      </div>
    )
  }
  click = ()=>{
    this.setState({
      count : this.state.count+1
    })
  }
}
```

### 1. useState

- state ë³€ìˆ˜ì™€ state ë³€ê²½í•¨ìˆ˜ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

```jsx
import React from 'react'

export default function Example2 () {
  const [count,setCount] = React.useState(0); 

  return (
    <div>
      <p>
        You Clicked {count} times.
      </p>
      <button onClick={click}>Click me</button>
    </div>
  )

  function click (){
    setCount(count+1)
  }
}
```

- ê°ì²´ë¥¼ state ë³€ìˆ˜ë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```jsx
import React from 'react'

export default function Example3 () {
  //useState : ê°ì²´ ë°ì´í„°
  const [state,setState] = React.useState({count:0}); 

  return (
    <div>
      <p>
        You Clicked {state.count} times.
      </p>
      <button onClick={click}>Click me</button>
    </div>
  )
	// setState ë°©ë²•1
  function click (){
    setState({
      count : state.count+1
    })
  }
	// setState ë°©ë²•2 : í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ìŠµë‹ˆë‹¤. stateë¥¼ ì˜ì¡´ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
	function click (){
    setState((state)=>{
      return {
        count : state.count+1
      }
    })
  }

}
```

- classì˜ stateëŠ” render ì‚¬ì´ì— this.stateë¥¼ ê³µìœ í•©ë‹ˆë‹¤.

    ğŸ˜€ render ì‚¬ì´ì— ë°”ë€ stateë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì¢‹ì•„ìš”.

    ğŸ˜… render ì‚¬ì´ì— reference ì‚¬ìš©í•  ê²½ìš° ì¢‹ì§€ ì•Šì•„ìš”.

- functionì˜ stateëŠ” render ì‚¬ì´ì— stateë¥¼ ê³µìœ í•˜ì§€  ì•ŠìŠµë‹ˆë‹¤.

### 2. useEffect

- ë¼ì´í”„ì‚¬ì´í´ í›…ì„ ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `componentDidMount, componentDidUpdate, componentWillUnmount` ëŒ€ì²´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë™ë“±í•œ ì—­í• ì€ ì•„ë‹™ë‹ˆë‹¤.)

---

- ì‚¬ìš©ë°©ë²•
- `[]ëŠ” dependency list ì…ë‹ˆë‹¤.`

```jsx
React.useEffect(()=>{
  console.log("componentDidMount")
}, []); // ìµœì´ˆë§Œ ì‹¤í–‰ componentDidMountì™€ ê°™ì•„ìš”.

React.useEffect(()=>{
    console.log("componentDidMount & componentDidUpadte",count)
  }) // ì‹¤í–‰ 
  
```

---

- useEffectëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

```jsx
React.useEffect(()=>{
    console.log("componentDidMount1",count)
  }, []); 

React.useEffect(()=>{
    console.log("componentDidMount2",count)
  }, []); 

React.useEffect(()=>{
    console.log("componentDidMount & componentDidUpdate by count",count)
  }, [count]); 

React.useEffect(()=>{
    console.log("componentDidMount")
    return ()=>{
      // cleanup ì •ë¦¬í•˜ê³  ë– ë‚©ë‹ˆë‹¤.
      // ë‹¤ìŒ ë Œë”ë  ë•Œ ê·¸ ì§ì „ì— ì´ return êµ¬ë¬¸ì´ ë¨¼ì € ì‹¤í–‰ë©ë‹ˆë‹¤.
      // componentWillUnmount
    }
  }, []);

React.useEffect(()=>{
    console.log("componentDidMount")
    return ()=>{
      // cleanup ì •ë¦¬í•˜ê³  ë– ë‚©ë‹ˆë‹¤.
      // ë‹¤ìŒ useEffectê°€ ì‚´í–‰ë  ë•Œ ê·¸ ì§ì „ì— ì´ return êµ¬ë¬¸ì´ ë¨¼ì € ì‹¤í–‰ë©ë‹ˆë‹¤.
      console.log("cleanup by count ",count)
    }
  }, [count]);
```

### 3. useContext

## React : Custom Hooks

### useSomething

- ë‚˜ë§Œì˜ í›… ë§Œë“¤ê¸°
1. ê°€ë¡œ ì°½ ê¸¸ì´ ë°”ë€” ë•Œë§ˆë‹¤ ë°”ê¿”ë³´ê¸°

```jsx
import React, { useState, useEffect } from 'react';

export default function useWindowWidth() {
  const [width,setWidth] = React.useState(window.innerWidth);
  useEffect(()=>{
    const resize = ()=> {
      setWidth(window.innerWidth)
    }
    //componentDidMount
    window.addEventListener('resize',resize)

    //cleanup
    return ()=>{
      // componentWillUnmount
      window.removeEventListener('resize',resize)
    }
  },[]) 
  
  return width;
}
```

### useHasMounted vs withHasMounted

- withHasMounted : propsë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
- useHasMounted : Hookì…ë‹ˆë‹¤. / ìš”ìƒˆ ë” ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## React : React Library ì œê³µ Hook

### useReducer

- useStateì˜ í™•ì¥íŒ
- ë³µì¡í•œ ê°ì²´ì˜ stateì¼ ê²¨ìš° ì‚¬ìš©í•˜ë©´ ìœ ìš©í•©ë‹ˆë‹¤.
- ë‹¤ìŒ stateê°€ ì´ì „ stateì— ì˜ì¡´ì ì¸ ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.

```jsx
import { useReducer } from "react"

// reducer : stateë¥¼ ë³€ê²½í•˜ëŠ” ë¡œì§ì´ ìˆëŠ” í•¨ìˆ˜
const reducer =(state,action)=>{
  if(action.type==="PLUS"){
    return {
      count : state.count+1 // ì´ì „ stateì— ì˜ì¡´ì ì¸ ê²½ìš°
    };
  }
  else 
    return state;
}

// dispatch : action ê°ì²´ë¥¼ ë„£ì–´ì„œ ì‹¤í–‰ 

// action : í•„ìˆ˜ í”„ë¡œí¼í‹°ë¡œ typeì„ ê°€ì§„ ê°ì²´

export default function Example6() {

  const [state, dispatch] =useReducer(reducer, {count: 0});

  return (
    <div>
      <p>
        You Clicked {state.count} times.
      </p>
      <button onClick={click}>Click me</button>
    </div>
  )

  function click (){
    dispatch({type: "PLUS"})
  }
}
```

### useMemo

- íŠ¹ì • í•¨ìˆ˜ë¥¼ íŠ¹ì • stateê°€ ë°”ë€” ë•Œì—ë§Œ ì‹¤í–‰ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```jsx
function sum(persons){
    return persons.map((person)=>person.age).reduce((l,r)=>l+r,0)
}

const count = useMemo(()=>{
  return sum(persons);
},[persons])

```

### useCallback

- ì•„ë˜ ì˜ˆì œëŠ” í•¨ìˆ˜ê°€ ë§ˆì¹˜ useEffectì˜ `componentDidMount` ì²˜ëŸ¼ ì²˜ìŒì—ë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

```jsx
const click = useCallback(()=>{
  console.log(value)
},[]);
```

- dependency listì— ì˜í–¥ì„ ë°›ì•„ `useCallback` ì†ì˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

### useRef

- `createRef()` ëŠ” ë Œë”ë  ë•Œë§ˆë‹¤ ìƒˆë¡œ Refë¥¼ ë§Œë“­ë‹ˆë‹¤.
- `useRef()`ëŠ” ë Œë”ê°€ ë˜ì–´ë„ ê°™ì€ Refë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. (ë‹¨, ìµœì´ˆì—ëŠ” undefinedì…ë‹ˆë‹¤.)

---

### ì™œ ì“°ë‚˜ìš”?

ğŸ¤” `useMemo, useCallback, useRef`ëŠ” ë Œë” ì‚¬ì´ì— ì–´ë–¤ ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. 

- class ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” render ì•ˆì—ì„œë§Œ ë°”ë€Œë¯€ë¡œ ì‹ ê²½ì“¸ í•„ìš”ì—†ì—ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ, function ì»´í¬ë„ŒíŠ¸ëŠ” ì „ë¶€ ë‹¤ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²½í–¥ì´ ìˆìœ¼ë¯€ë¡œ ì´ë¥¼ ë§‰ê¸° ìœ„í•´ ì´ëŸ¬í•œ Additional Hookë“¤ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## React : React Router Hooks

- hookì„ ì‚¬ìš©í•œ routing ë°©ë²• (React-router-dom)

### useHistory

```jsx
const history = useHistory();
history.push("/");
---
```

### useParams

- URLì—ì„œ parameterë¥¼ ê°€ì ¸ì˜¬ ê²½ìš° ìœ ìš©í•©ë‹ˆë‹¤.

```jsx
const params = useParams();
const id = params.id;
```

---

## React : ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹  (feat. propsì˜ ë¬¸ì œì )

### í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ ë³€ê²½í•˜ê¸°

![image](https://user-images.githubusercontent.com/32920566/132346647-241ee3d3-e729-45e8-89f5-97d2a4d40b75.png) <br>

- ì´ëŸ° ê²½ìš° ë³€ê²½ëœ props(valueê°’)ì„ ê³„ì† ì»´í¬ë„ŒíŠ¸ ì‚¬ì´ë¥¼ í†µê³¼í•˜ë©° ë„˜ê²¨ì¤˜ì•¼í•©ë‹ˆë‹¤.

```jsx
import {useState} from "react"

export default function A (props){
  const [value,setValue]=useState('ì•„ì§ ì•ˆë°”ë€œ'); 
  return (
    <div>
    <B value={value}/>
    <button onClick={click}>E ë°”ê¾¸ê¸°</button>
  </div>
  )
    function click(){
      setValue('Eê°’ ë³€ê²½')
    }

}

function B ({value}){
  return <div>
    <p> ì—¬ê¸´ B</p>
    <C  value={value}/>
  </div>
}
function C ({value}){
  return <div>
  <p> ì—¬ê¸´ C</p>
  <D value={value}/>
</div>
}
function D ({value}){
  return <div>
  <p> ì—¬ê¸´ D</p>
  <E value={value}/>
</div>
}
function E ({value}){
  return <div>
    <p>ì—¬ê¸´ E</p>
    <h3>{value}</h3>
</div>
}
```

ğŸ˜… B,C,DëŠ” ì‚¬ê³  ë‚˜ê¸°ë„ ì‰½ê³  ì „ë‹¬ë§Œ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

### ìƒìœ„ ì»´í¬ë„ŒíŠ¸ ë³€ê²½í•˜ê¸°

![image](https://user-images.githubusercontent.com/32920566/132346702-67d6024f-20e7-4cfc-992a-f031204684d8.png)
<br>
- propsë¡œ setValue í•¨ìˆ˜ë¥¼ ë„˜ê²¨ì¤ë‹ˆë‹¤.

```jsx
import {useState} from "react"

export default function A (){
  const [value, setValue] = useState('ì•„ì§ ì•ˆë°”ë€œ');
  return (
    <div>
      <p>{value}</p>
      <B setValue={setValue}/>
    </div>
  )
}

function B ({setValue}){
  return (
    <div> 
      <p> ì—¬ê¸´ B </p>
      <C setValue={setValue}/>
    </div>
  )
}

function C ({setValue}){
  return (
    <div> 
      <p> ì—¬ê¸´ C </p>
      <D setValue={setValue}/>
    </div>
  )
}

function D ({setValue}){
  return (
    <div> 
      <p> ì—¬ê¸´ D </p>
      <E setValue={setValue}/>
    </div>
  )
}

function E ({setValue}){
  return (
    <div> 
      <p> ì—¬ê¸´ E </p>
      <button onClick={click}>ê°’ ë°”ê¾¸ê¸°</button>
    </div>
  )

  function click(){
    setValue('ë°”ë€œ!')
  }
}
```

ğŸ˜… propsëŠ” ë¬¸ì œê°€ ë°œìƒí•  í™•ë¥ ì´ ë†’ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ë¥¸ ë°©ë²•ì„ ë„ì…í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. â†’ `ContextAPI, useContext`
